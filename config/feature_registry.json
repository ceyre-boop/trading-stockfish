{
  "version": "0.2.1",
  "defaults": {
    "transform": { "kind": "none", "params": {} },
    "encoding": { "kind": "none", "params": {} },
    "live": true,
    "shape": "scalar",
    "role": ["eval", "ml"],
    "constraints": {"min": null, "max": null, "allowed_values": null}
  },
  "features": {
    "macro_pressure": {
      "type": "float",
      "source": "news",
      "description": "Aggregated macro pressure from parsed events near current time.",
      "tags": ["macro", "risk", "news"],
      "alias": "macro_pressure_score",
      "transform": { "kind": "zscore", "params": { "window": 2000 } }
    },

    "macro_bias_num": {
      "type": "float",
      "source": "news",
      "description": "Net directional macro bias (-1 to +1).",
      "tags": ["macro", "direction", "news"],
      "alias": "news_directional_bias"
    },

    "regime_vol": {
      "type": "category",
      "source": "stats",
      "description": "Volatility regime (LOW_VOL, MID_VOL, HIGH_VOL).",
      "live": false,
      "tags": ["regime", "volatility"],
      "alias": "volatility_state.vol_regime",
      "encoding": { "kind": "one_hot", "params": {} },
      "constraints": {
        "allowed_values": ["LOW_VOL", "NORMAL", "HIGH", "EXTREME"]
      }
    },

    "rsi_14": {
      "type": "float",
      "source": "indicator",
      "description": "14-period RSI on primary asset.",
      "tags": ["indicator", "momentum"],
      "alias": "rsi_value",
      "transform": { "kind": "minmax", "params": { "min": 0, "max": 100 } }
    },

    "growth_event_flag": {
      "type": "bool",
      "source": "ontology",
      "description": "True if current macro event is growth-related.",
      "tags": ["ontology", "growth", "macro"],
      "alias": "next_event_type",
      "constraints": {"allowed_values": ["GDP", "PMI", "ISM", "DURABLE", "GDP_ADV"]}
    },

    "ml_macro_up_prob": {
      "type": "float",
      "source": "ml",
      "description": "Offline ML probability that macro context favors upside (0-1).",
      "live": false,
      "tags": ["ml", "macro", "probability"],
      "alias": "ml_macro_up_prob",
      "constraints": { "min": 0.0, "max": 1.0 }
    },

    "session_high": {
      "type": "float",
      "source": "session",
      "description": "Highest mid price observed in current session (docs/session_regimes.md).",
      "tags": ["session", "price", "range"],
      "alias": "session_high"
    },

    "session_low": {
      "type": "float",
      "source": "session",
      "description": "Lowest mid price observed in current session (docs/session_regimes.md).",
      "tags": ["session", "price", "range"],
      "alias": "session_low"
    },

    "session_range": {
      "type": "float",
      "source": "session",
      "description": "Intra-session range = session_high - session_low (non-negative).",
      "tags": ["session", "price", "range"],
      "alias": "session_range",
      "constraints": { "min": 0.0, "max": null, "allowed_values": null }
    }
  }
}
